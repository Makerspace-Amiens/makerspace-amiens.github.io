<div class="box" style="max-width:600px; margin:auto;">
  {% if include.title %}
  <h3 class="title is-4 has-text-centered">{{ include.title }}</h3>
  {% endif %}
  <canvas id="{{ include.id | default: 'skillRadar' }}" width="400" height="400"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const ctx = document.getElementById("{{ include.id | default: 'skillRadar' }}").getContext('2d');
  const labels = "{{ include.labels | default: 'Skill A,Skill B,Skill C' }}".split(',');

  const datasets = [];

  {% for i in (1..5) %}
  {% assign values = 'values_' | append: i %}
  {% assign label = 'label_' | append: i %}
  {% assign color = 'color_' | append: i %}
  {% if include[values] %}
  datasets.push({
    label: "{{ include[label] | default: 'Dataset ' | append: i }}",
    data: [{{ include[values] }}],
    fill: true,
    backgroundColor: ("{{ include[color] | default: '#3273dc' }}" + '33'), // transparence
    borderColor: "{{ include[color] | default: '#3273dc' }}",
    pointBackgroundColor: "{{ include[color] | default: '#3273dc' }}",
    pointBorderColor: "#fff",
    pointHoverBackgroundColor: "#fff",
    pointHoverBorderColor: "{{ include[color] | default: '#3273dc' }}"
  });
  {% endif %}
  {% endfor %}

  new Chart(ctx, {
    type: 'radar',
    data: { labels: labels, datasets: datasets },
    options: {
      responsive: true,
      scales: {
        r: {
          suggestedMin: 0,
          suggestedMax: 100,
          grid: { color: "#ddd" },
          angleLines: { color: "#ddd" },
          pointLabels: { font: { size: 13 } },
          ticks: { display: false }
        }
      },
      plugins: {
        legend: { display: true, position: 'bottom' }
      }
    }
  });
});
</script>
